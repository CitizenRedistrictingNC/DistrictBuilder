<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>publicmapping.redistricting.models.Plan</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="publicmapping-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a href="http://publicmapping.sf.net">Publicmapping on SourceForge</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="publicmapping-module.html">Package&nbsp;publicmapping</a> ::
        <a href="publicmapping.redistricting-module.html">Package&nbsp;redistricting</a> ::
        <a href="publicmapping.redistricting.models-module.html">Module&nbsp;models</a> ::
        Class&nbsp;Plan
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="publicmapping.redistricting.models.Plan-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class Plan</h1><p class="nomargin-top"><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan">source&nbsp;code</a></span></p>
<center>
<center>  <map id="uml_class_diagram_for_publicma_18" name="uml_class_diagram_for_publicma_18">
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#name" title="publicmapping.redistricting.models.Plan.name" alt="" coords="17,31,461,49"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#description" title="publicmapping.redistricting.models.Plan.description" alt="" coords="17,49,461,68"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#is_template" title="publicmapping.redistricting.models.Plan.is_template" alt="" coords="17,68,461,87"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#is_shared" title="publicmapping.redistricting.models.Plan.is_shared" alt="" coords="17,87,461,105"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#is_pending" title="publicmapping.redistricting.models.Plan.is_pending" alt="" coords="17,105,461,124"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#version" title="publicmapping.redistricting.models.Plan.version" alt="" coords="17,124,461,143"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#created" title="publicmapping.redistricting.models.Plan.created" alt="" coords="17,143,461,161"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#edited" title="publicmapping.redistricting.models.Plan.edited" alt="" coords="17,161,461,180"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#owner" title="publicmapping.redistricting.models.Plan.owner" alt="" coords="17,180,461,199"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#legislative_body" title="publicmapping.redistricting.models.Plan.legislative_body" alt="" coords="17,199,461,217"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan.Meta-class.html" title="Define a unique constraint on 2 fields of this model." alt="" coords="17,217,461,236"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#__unicode__" title="Represent the Plan as a unicode string." alt="" coords="17,239,461,257"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#targets" title="Get the targets associated with this plan by stepping back through the &#160;legislative body and finding distinct targets for displayed subjects among &#160;all the geolevels in the body." alt="" coords="17,257,461,276"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#get_nth_previous_version" title="Get the version of this plan N steps away." alt="" coords="17,276,461,295"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#purge" title="Purge portions of this plan&#39;s history." alt="" coords="17,295,461,313"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#add_geounits" title="Add Geounits to a District." alt="" coords="17,313,461,332"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#get_wfs_districts" title="Get the districts in this plan as a GeoJSON WFS response." alt="" coords="17,332,461,351"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#get_districts_at_version" title="Get Plan Districts at a specified version." alt="" coords="17,351,461,369"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#create_default" title="Create a default plan." alt="" coords="17,369,461,388"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#get_base_geounits_in_geom" title="Get a list of the geounit ids of the geounits that comprise &#160;this geometry at the base level." alt="" coords="17,388,461,407"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#get_base_geounits" title="Get a list of the geounit ids of the geounits that comprise &#160;this plan at the base level." alt="" coords="17,407,461,425"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#get_assigned_geounits" title="Get a list of the geounit ids of the geounits that comprise &#160;this plan at the base level." alt="" coords="17,425,461,444"/>
<area shape="rect" id="node23" href="publicmapping.redistricting.models.Plan-class.html#get_unassigned_geounits" title="Get a list of the geounit ids of the geounits that do not belong to any district of this plan at the base level." alt="" coords="17,444,461,463"/>
<area shape="rect" id="node1" href="publicmapping.redistricting.models.Plan-class.html" title="A collection of Districts for an area of coverage, like a state." alt="" coords="5,6,472,469"/>
</map>
  <img src="uml_class_diagram_for_publicma_18.gif" alt='' usemap="#uml_class_diagram_for_publicma_18" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<p>A collection of Districts for an area of coverage, like a state.</p>
  <p>A Plan is created by a user to represent multiple Districts. A Plan 
  may be a template (created by admins, copyable by all users), or shared 
  (created by users, copyable by all users).  In addition, Plans are 
  versioned; the Plan version is the most recent version of all Districts 
  that are a part of this Plan.</p>

<!-- ==================== NESTED CLASSES ==================== -->
<a name="section-NestedClasses"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Nested Classes</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-NestedClasses"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="publicmapping.redistricting.models.Plan.Meta-class.html" class="summary-name">Meta</a><br />
      Define a unique constraint on 2 fields of this model.
    </td>
  </tr>
</table>
<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#__unicode__" class="summary-sig-name">__unicode__</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Represent the Plan as a unicode string.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.__unicode__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#targets" class="summary-sig-name">targets</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Get the targets associated with this plan by stepping back through 
      the legislative body and finding distinct targets for displayed 
      subjects among all the geolevels in the body.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.targets">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#get_nth_previous_version" class="summary-sig-name">get_nth_previous_version</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">steps</span>)</span><br />
      Get the version of this plan N steps away.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_nth_previous_version">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#purge" class="summary-sig-name">purge</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">before</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">after</span>=<span class="summary-sig-default">None</span>)</span><br />
      Purge portions of this plan's history.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.purge">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#add_geounits" class="summary-sig-name">add_geounits</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">districtid</span>,
        <span class="summary-sig-arg">geounit_ids</span>,
        <span class="summary-sig-arg">geolevel</span>,
        <span class="summary-sig-arg">version</span>)</span><br />
      Add Geounits to a District.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.add_geounits">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#get_wfs_districts" class="summary-sig-name">get_wfs_districts</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">version</span>,
        <span class="summary-sig-arg">subject_id</span>,
        <span class="summary-sig-arg">extents</span>,
        <span class="summary-sig-arg">geolevel</span>)</span><br />
      Get the districts in this plan as a GeoJSON WFS response.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_wfs_districts">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#get_districts_at_version" class="summary-sig-name">get_districts_at_version</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">version</span>,
        <span class="summary-sig-arg">include_geom</span>=<span class="summary-sig-default">False</span>)</span><br />
      Get Plan Districts at a specified version.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_districts_at_version">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#get_base_geounits_in_geom" class="summary-sig-name">get_base_geounits_in_geom</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">geom</span>,
        <span class="summary-sig-arg">threshold</span>=<span class="summary-sig-default">100</span>,
        <span class="summary-sig-arg">simplified</span>=<span class="summary-sig-default">False</span>)</span><br />
      Get a list of the geounit ids of the geounits that comprise 
this geometry at the base level.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_base_geounits_in_geom">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#get_base_geounits" class="summary-sig-name">get_base_geounits</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">threshold</span>=<span class="summary-sig-default">100</span>)</span><br />
      Get a list of the geounit ids of the geounits that comprise 
this plan at the base level.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_base_geounits">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#get_assigned_geounits" class="summary-sig-name">get_assigned_geounits</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">threshold</span>=<span class="summary-sig-default">100</span>)</span><br />
      Get a list of the geounit ids of the geounits that comprise 
this plan at the base level.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_assigned_geounits">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#get_unassigned_geounits" class="summary-sig-name">get_unassigned_geounits</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">threshold</span>=<span class="summary-sig-default">100</span>)</span><br />
      Get a list of the geounit ids of the geounits that do not belong to
any district of this plan at the base level.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_unassigned_geounits">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== STATIC METHODS ==================== -->
<a name="section-StaticMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Static Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-StaticMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#create_default" class="summary-sig-name">create_default</a>(<span class="summary-sig-arg">name</span>,
        <span class="summary-sig-arg">body</span>,
        <span class="summary-sig-arg">owner</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">template</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">is_pending</span>=<span class="summary-sig-default">True</span>)</span><br />
      Create a default plan.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.create_default">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="name"></a><span class="summary-name">name</span> = <code title="models.CharField(max_length= 200)">models.CharField(max_length= 200)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="publicmapping.redistricting.models.Plan-class.html#description" class="summary-name">description</a> = <code title="models.CharField(max_length= 500, db_index= True, blank= True)">models.CharField(max_length= 500, db_index= True<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="is_template"></a><span class="summary-name">is_template</span> = <code title="models.BooleanField(default= False)">models.BooleanField(default= False)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="is_shared"></a><span class="summary-name">is_shared</span> = <code title="models.BooleanField(default= False)">models.BooleanField(default= False)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="is_pending"></a><span class="summary-name">is_pending</span> = <code title="models.BooleanField(default= False)">models.BooleanField(default= False)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="version"></a><span class="summary-name">version</span> = <code title="models.PositiveIntegerField(default= 0)">models.PositiveIntegerField(default= 0)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="created"></a><span class="summary-name">created</span> = <code title="models.DateTimeField(auto_now_add= True)">models.DateTimeField(auto_now_add= True)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="edited"></a><span class="summary-name">edited</span> = <code title="models.DateTimeField(auto_now= True)">models.DateTimeField(auto_now= True)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="owner"></a><span class="summary-name">owner</span> = <code title="models.ForeignKey(User)">models.ForeignKey(User)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="legislative_body"></a><span class="summary-name">legislative_body</span> = <code title="models.ForeignKey(LegislativeBody)">models.ForeignKey(LegislativeBody)</code>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__unicode__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__unicode__</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.__unicode__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Represent the Plan as a unicode string. This is the Plan's name.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="targets"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">targets</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.targets">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Get the targets associated with this plan by stepping back through the
  legislative body and finding distinct targets for displayed subjects 
  among all the geolevels in the body. This will return a django queryset 
  if successful.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_nth_previous_version"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_nth_previous_version</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">steps</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_nth_previous_version">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Get the version of this plan N steps away.

Since editing a plan in its history purges higher versions of the
districts in the plan, the version numbers become discontinuous.
In order to support purging with these discontinuous version 
numbers, this method assists in finding the valid version number
of the plan that is so many steps behind the current plan.

This problem does not occur when purging higher numbered versions 
from a plan.

Parameters:
    steps -- The number of 'undo' steps away from the current 
             plan's version.

Returns:
    A valid version of this plan in the past.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="purge"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">purge</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">before</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">after</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.purge">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Purge portions of this plan's history.

Use one of 'before' or 'after' keywords to purge either direction.
If both are used, only the versions before will be purged.

Keywords:
    before -- purge the history of this plan prior to this version.
    after -- purge the history of this plan after this version.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="add_geounits"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">add_geounits</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">districtid</span>,
        <span class="sig-arg">geounit_ids</span>,
        <span class="sig-arg">geolevel</span>,
        <span class="sig-arg">version</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.add_geounits">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Add Geounits to a District. When geounits are added to one 
District, they are also removed from whichever district they're 
currently in. 

NOTE: All calls to 'simplify' use the spatial units -- the map 
units in web mercator are meters, so simplify(tolerance=100.0) 
simplifies geometries to 100 meters between points (-ish).

Parameters:
    districtid -- The district_id (NOT the id) of the
        destination District.
    geounit_ids -- A list of Geounit ids that are to be added
        to the District.
    geolevel -- The Geolevel of the geounit_ids.
    version -- The version of the Plan that is being modified.

Returns:
    Either 1) the number of Districts changed if adding geounits 
    to a district that already exists; 2) the name of the district
    created with the passed geounits.

</pre>
  <dl class="fields">
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@transaction.commit_on_success</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="get_wfs_districts"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_wfs_districts</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">version</span>,
        <span class="sig-arg">subject_id</span>,
        <span class="sig-arg">extents</span>,
        <span class="sig-arg">geolevel</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_wfs_districts">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Get the districts in this plan as a GeoJSON WFS response.

This method behaves much like a WFS service, returning the GeoJSON 
for each district. This manual view exists because the limitations
of filtering and the complexity of the version query -- it is 
impossible to use the WFS layer in Geoserver automatically.

Parameters:
    version -- The Plan version.
    subject_id -- The Subject attributes to attach to the district.
    extent -- The map extents.

Returns:
    GeoJSON describing the Plan.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_districts_at_version"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_districts_at_version</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">version</span>,
        <span class="sig-arg">include_geom</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_districts_at_version">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Get Plan Districts at a specified version.

When a district is changed, a copy of the district is inserted
into the database with an incremented version number. The plan version
is also incremented.  This method returns all of the districts
in the given plan at a particular version.

Parameters:
    version -- The version of the Districts to fetch.
    include_geom -- Should the geometry of the district be fetched?

Returns:
    A list of districts that exist in the plan at the version.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="create_default"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">create_default</span>(<span class="sig-arg">name</span>,
        <span class="sig-arg">body</span>,
        <span class="sig-arg">owner</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">template</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">is_pending</span>=<span class="sig-default">True</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.create_default">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Create a default plan.

Parameters:
    name - The name of the plan to create.
    owner - The system user that will own this plan.

Returns:
    A new plan, owned by owner, with one district named 
    &quot;Unassigned&quot;.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_base_geounits_in_geom"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_base_geounits_in_geom</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">geom</span>,
        <span class="sig-arg">threshold</span>=<span class="sig-default">100</span>,
        <span class="sig-arg">simplified</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_base_geounits_in_geom">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Get a list of the geounit ids of the geounits that comprise 
this geometry at the base level.  

Parameters:
    threshold - distance threshold used for buffer in/out optimization
    simplified - denotes whether or not the geom passed in is already simplified

Returns:
    A list of tuples containing Geounit IDs and portable ids
    that lie within this geometry. 

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_base_geounits"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_base_geounits</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">threshold</span>=<span class="sig-default">100</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_base_geounits">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Get a list of the geounit ids of the geounits that comprise 
this plan at the base level.  

Parameters:
    threshold - distance threshold used for buffer in/out optimization

Returns:
    A list of tuples containing Geounit IDs, portable ids,
    and district ids that lie within this Plan. 

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_assigned_geounits"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_assigned_geounits</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">threshold</span>=<span class="sig-default">100</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_assigned_geounits">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Get a list of the geounit ids of the geounits that comprise 
this plan at the base level. This is different than
get_base_geounits, because it doesn't return district ids
along with the geounit ids, and should therefore be more performant.

Parameters:
    threshold - distance threshold used for buffer in/out optimization

Returns:
    A list of tuples containing Geounit IDs and portable ids
    that lie within this Plan. 

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_unassigned_geounits"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_unassigned_geounits</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">threshold</span>=<span class="sig-default">100</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_unassigned_geounits">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Get a list of the geounit ids of the geounits that do not belong to
any district of this plan at the base level. 

Parameters:
    threshold - distance threshold used for buffer in/out optimization

Returns:
    A list of tuples containing Geounit IDs and portable ids
    that do not belong to any districts within this Plan. 

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== CLASS VARIABLE DETAILS ==================== -->
<a name="section-ClassVariableDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variable Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariableDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="description"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">description</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
models.CharField(max_length= 500, db_index= True, blank= True)
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="publicmapping-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a href="http://publicmapping.sf.net">Publicmapping on SourceForge</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Thu Feb 17 23:26:54 2011
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
