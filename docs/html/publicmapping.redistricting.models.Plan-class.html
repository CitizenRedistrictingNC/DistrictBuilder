<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>publicmapping.redistricting.models.Plan</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="publicmapping-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a href="http://publicmapping.sf.net">Publicmapping on SourceForge</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="publicmapping-module.html">Package&nbsp;publicmapping</a> ::
        <a href="publicmapping.redistricting-module.html">Package&nbsp;redistricting</a> ::
        <a href="publicmapping.redistricting.models-module.html">Module&nbsp;models</a> ::
        Class&nbsp;Plan
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="publicmapping.redistricting.models.Plan-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class Plan</h1><p class="nomargin-top"><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan">source&nbsp;code</a></span></p>
<center>
<center>  <map id="uml_class_diagram_for_publicma_16" name="uml_class_diagram_for_publicma_16">
<area shape="rect" href="publicmapping.redistricting.models.Plan-class.html#name" title="publicmapping.redistricting.models.Plan.name" alt="" coords="17,28,361,47"/>
<area shape="rect" href="publicmapping.redistricting.models.Plan-class.html#is_template" title="publicmapping.redistricting.models.Plan.is_template" alt="" coords="17,47,361,65"/>
<area shape="rect" href="publicmapping.redistricting.models.Plan-class.html#is_shared" title="publicmapping.redistricting.models.Plan.is_shared" alt="" coords="17,65,361,84"/>
<area shape="rect" href="publicmapping.redistricting.models.Plan-class.html#version" title="publicmapping.redistricting.models.Plan.version" alt="" coords="17,84,361,103"/>
<area shape="rect" href="publicmapping.redistricting.models.Plan-class.html#created" title="publicmapping.redistricting.models.Plan.created" alt="" coords="17,103,361,121"/>
<area shape="rect" href="publicmapping.redistricting.models.Plan-class.html#edited" title="publicmapping.redistricting.models.Plan.edited" alt="" coords="17,121,361,140"/>
<area shape="rect" href="publicmapping.redistricting.models.Plan-class.html#owner" title="publicmapping.redistricting.models.Plan.owner" alt="" coords="17,140,361,159"/>
<area shape="rect" href="publicmapping.redistricting.models.Plan.Meta-class.html" title="Define a unique constraint on 2 fields of this model." alt="" coords="17,159,361,177"/>
<area shape="rect" href="publicmapping.redistricting.models.Plan-class.html#__unicode__" title="Represent the Plan as a unicode string." alt="" coords="17,180,361,199"/>
<area shape="rect" href="publicmapping.redistricting.models.Plan-class.html#add_geounits" title="Add Geounits to a District." alt="" coords="17,199,361,217"/>
<area shape="rect" href="publicmapping.redistricting.models.Plan-class.html#get_wfs_districts" title="Get the districts in this plan as a GeoJSON WFS response." alt="" coords="17,217,361,236"/>
<area shape="rect" href="publicmapping.redistricting.models.Plan-class.html#get_districts_at_version" title="Get Plan Districts at a specified version." alt="" coords="17,236,361,255"/>
<area shape="rect" href="publicmapping.redistricting.models.Plan-class.html" title="A collection of Districts for an area of coverage, like a state." alt="" coords="16,11,363,256"/>
</map>
  <img src="uml_class_diagram_for_publicma_16.gif" alt='' usemap="#uml_class_diagram_for_publicma_16" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<p>A collection of Districts for an area of coverage, like a state.</p>
  <p>A Plan is created by a user to represent multiple Districts. A Plan 
  may be a template (created by admins, copyable by all users), or shared 
  (created by users, copyable by all users).  In addition, Plans are 
  versioned; the Plan version is the most recent version of all Districts 
  that are a part of this Plan.</p>

<!-- ==================== NESTED CLASSES ==================== -->
<a name="section-NestedClasses"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Nested Classes</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-NestedClasses"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="publicmapping.redistricting.models.Plan.Meta-class.html" class="summary-name">Meta</a><br />
      Define a unique constraint on 2 fields of this model.
    </td>
  </tr>
</table>
<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#__unicode__" class="summary-sig-name">__unicode__</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Represent the Plan as a unicode string.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.__unicode__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#add_geounits" class="summary-sig-name">add_geounits</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">districtid</span>,
        <span class="summary-sig-arg">geounit_ids</span>,
        <span class="summary-sig-arg">geolevel</span>,
        <span class="summary-sig-arg">version</span>)</span><br />
      Add Geounits to a District.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.add_geounits">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#get_wfs_districts" class="summary-sig-name">get_wfs_districts</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">version</span>,
        <span class="summary-sig-arg">subject_id</span>)</span><br />
      Get the districts in this plan as a GeoJSON WFS response.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_wfs_districts">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="publicmapping.redistricting.models.Plan-class.html#get_districts_at_version" class="summary-sig-name">get_districts_at_version</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">version</span>)</span><br />
      Get Plan Districts at a specified version.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_districts_at_version">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="name"></a><span class="summary-name">name</span> = <code title="models.CharField(max_length= 200)">models.CharField(max_length= 200)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="is_template"></a><span class="summary-name">is_template</span> = <code title="models.BooleanField(default= False)">models.BooleanField(default= False)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="is_shared"></a><span class="summary-name">is_shared</span> = <code title="models.BooleanField(default= False)">models.BooleanField(default= False)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="version"></a><span class="summary-name">version</span> = <code title="models.PositiveIntegerField(default= 0)">models.PositiveIntegerField(default= 0)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="created"></a><span class="summary-name">created</span> = <code title="models.DateTimeField(auto_now_add= True)">models.DateTimeField(auto_now_add= True)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="edited"></a><span class="summary-name">edited</span> = <code title="models.DateTimeField(auto_now= True)">models.DateTimeField(auto_now= True)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="owner"></a><span class="summary-name">owner</span> = <code title="models.ForeignKey(User)">models.ForeignKey(User)</code>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__unicode__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__unicode__</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.__unicode__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Represent the Plan as a unicode string. This is the Plan's name.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="add_geounits"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">add_geounits</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">districtid</span>,
        <span class="sig-arg">geounit_ids</span>,
        <span class="sig-arg">geolevel</span>,
        <span class="sig-arg">version</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.add_geounits">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Add Geounits to a District. When geounits are added to one District,
they are also removed from whichever district they're currently in. 

NOTE: All calls to 'simplify' use the spatial units -- the map units
in web mercator are meters, so simplify(tolerance=100.0) simplifies 
geometries to 100 meters between points (-ish).

Parameters:
    districtid -- The district_id (NOT the id) of the
        destination District.
    geounit_ids -- A list of Geounit ids that are to be added
        to the District.
    geolevel -- The Geolevel of the geounit_ids.
    version -- The version of the Plan that is being modified.

Returns:
    The number of Districts changed.

</pre>
  <dl class="fields">
    <dt>Decorators:</dt>
    <dd><ul class="nomargin-top">
        <li><code>@transaction.commit_on_success</code></li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="get_wfs_districts"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_wfs_districts</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">version</span>,
        <span class="sig-arg">subject_id</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_wfs_districts">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Get the districts in this plan as a GeoJSON WFS response.

This method behaves much like a WFS service, returning the GeoJSON 
for each district. This manual view exists because the limitations
of filtering and the complexity of the version query -- it is 
impossible to use the WFS layer in Geoserver automatically.

Parameters:
    version -- The Plan version.
    subject_id -- The Subject attributes to attach to the district.

Returns:
    GeoJSON describing the Plan.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_districts_at_version"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_districts_at_version</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">version</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="publicmapping.redistricting.models-pysrc.html#Plan.get_districts_at_version">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Get Plan Districts at a specified version.

The districts are versioned to the current plan version when
they are changed, so this method searches all the districts
in the plan, returning the districts that have the highest
version number at or below the version passed in.

Parameters:
    version -- The version of the Districts to fetch.

Returns:
    An array of districts that exist in the plan at the version.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="publicmapping-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a href="http://publicmapping.sf.net">Publicmapping on SourceForge</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Thu Sep 30 16:14:58 2010
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
