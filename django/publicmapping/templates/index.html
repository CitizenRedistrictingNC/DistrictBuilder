<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Welcome to PublicMapping</title>
    <link rel="stylesheet" type="text/css" href="/site-media/css/reset.css"/>
    <link rel="stylesheet" type="text/css" href="/site-media/jquery/themes/custom-theme/jquery-ui-1.8.2.custom.css"/>
    <link rel="stylesheet" type="text/css" href="/site-media/css/publicmapping.css"/>
  </head>
  <body id="static">
   <div class="static_wrap">
   
   <div id="static_header">
      <div id="logo">
               <img src="site-media/images/title-static.png" />
      </div>
      <div id="site_nav">
        <ul>
          <li><a href="">item</a></li>
          <li><a href="">item</a></li>
          <li><a class="last" href="">item</a></li>    
        </ul>
      </div>
      <div class="clear"></div>
    </div>
    
    <div id="banner">
       <img src="site-media/images/banner-home.png" />
    </div>

    <div id="body_box">
      <div id="tour_news">
        <div id="news">
          <h3>About the Public Mapping Project</h3>
          <ul>
            <li>Frequently Asked Questions</li>
            <li>Quick Start Guide</li>
            <li>Redistricting Resources</li>
            <li>... more ...</li>
          </ul>
        </div>


          <button id="new_to_redistricting">New to Redistricting?<br/><span class="take_a_tour">Take a Tour</span></button>

      </div>

      <div id="user">

        <div id="login">
          <form action="/accounts/login/" method="post">
            <input type="hidden" name="next" value="/districtmapping/plan/0/edit/"/>
            <h3>Log In</h3>
<input id="username" name="username"/>
<input id="password" name="password" type="password"/>
<button id="login" type="submit" />Login</button>
          </form>
<p><a href="#">Forgot your password?</a></p>

          </div>

        <div id="signup">
          <h3>Don't have an account?</h3>

          <h4>To Draw Your Own Maps...</h4>

            <button onclick="$('#register').dialog('open');" id="sign_up" />Sign Up</button>




          <h4>To View Other Users' Maps...</h4>

            <form id="anonymousForm" action="/accounts/register/" method="post">
              <button id="doAnonymous" id="enter_as_a_guest" />Enter as a guest</button>

            </form>
            
            <p><a href="#">Privacy Policy</a></p>

        </div>
        <div class="clear_left"></div>
      </div>
    </div>
    <div id="register" title="Sign Up For An Account">
        <form id="registerForm" action="/accounts/register/" method="post">
            <table id="registerTable">
                <tr>
                    <td class="fname">User Name *</td>
                    <td><input id="newusername" name="newusername" class="field"/></td>
                </tr>
                <tr>
                    <td class="fname">Password *</td>
                    <td><input id="newpassword1" name="newpassword1" type="password" class="field"/></td>
                </tr>
                <tr>
                    <td class="fname">Confirm Password *</td>
                    <td><input id="newpassword2" name="newpassword2" type="password" class="field"/></td>
                </tr>
                <tr>
                    <td class="fname">Password Hint *</td>
                    <td><input id="passwordhint" name="passwordhint" class="field"/></td>
                </tr>
                <tr>
                    <td class="fname">Email Address</td>
                    <td><input id="email" name="email" class="field"/></td>
                </tr>
                <tr>
                    <td colspan="2"><span class="recommended">Recommended to allow you to recover a password you have lost.</span></td>
                </tr>
                <tr>
                    <td class="fname">First Name</td>
                    <td><input id="firstname" name="firstname" class="field"/></td>
                </tr>
                <tr>
                    <td class="fname">Last Name</td>
                    <td><input id="lastname" name="lastname" class="field"/></td>
                </tr>
                <tr>
                    <td class="fname">Organization</td>
                    <td><input id="organization" name="organization" class="field"/></td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <input id="agree" name="agree" type="checkbox"/>
                        <label id="agreelabel" for="agree">I have read the <a href="#">Privacy Policy</a> and <a href="#">Terms of Use</a></label>
                    </td>
                </tr>
            </table>
            <div id="signUpButton">
                <input id="doRegister" type="button" value="Sign Up"/>
            </div>
            <div id="requiredNote">
                * Indicates required field
            </div>
        </form>
    </div>

    <div id="footer">
        <div id="copyright">Copyright &copy; 2010. All Rights Reserved</div>
        <div id="sponsors">Sponsor Logos</div>
    </div>
   </div>
    <script type="text/javascript" src="/site-media/jquery/jquery-1.4.2.js"></script>
    <script type="text/javascript" src="/site-media/jquery/external/jquery.bgiframe-2.1.1.js"></script>
    <script type="text/javascript" src="/site-media/jquery/jquery-ui-1.8.2.custom.min.js"></script>
    <script type="text/javascript">
    $(function(){
        $('#register').dialog({'autoOpen':false,'width':425,'modal':true, resizable: false});
        $('#doRegister').click(function(evt) {
            var frm = $('#registerForm'),
                username = frm.find('#newusername'),
                newpassword1 = frm.find('#newpassword1'),
                newpassword2 = frm.find('#newpassword2'),
                passwordhint = frm.find('#passwordhint'),
                agree = frm.find('#agree');

            if (username.val() == '') {
                username.removeClass('field');
                username.addClass('error');
                return;
            }
            else {
                username.removeClass('error');
                username.addClass('field');
            }

            if (newpassword1.val() == '' ||
                newpassword1.val() != newpassword2.val()) {
                newpassword1.removeClass('field');
                newpassword1.addClass('error');
                newpassword2.removeClass('field');
                newpassword2.addClass('error');
                return;
            }
            else {
                newpassword1.removeClass('error');
                newpassword1.addClass('field');
                newpassword2.removeClass('error');
                newpassword2.addClass('field');
            }

            if (passwordhint.val() == '') {
                passwordhint.removeClass('field');
                passwordhint.addClass('error');
                return;
            }
            else {
                passwordhint.addClass('field');
                passwordhint.removeClass('error');
            }

            if (!agree[0].checked) {
                $('#agreelabel').addClass('required');
                return;
            }
            
            jQuery.ajax({
                context:frm[0],
                data: { 
                    newusername:$('#newusername').val(),
                    newpassword1:$('#newpassword1').val(),
                    newpassword2:$('#newpassword2').val(),
                    email:$('#email').val(),
                    passwordhint:$('#passwordhint').val(),
                    firstname:$('#firstname').val(),
                    lastname:$('#lastname').val(),
                    organization:$('#organization').val()
                },
                dataType:'json',
                type:'POST',
                url:frm[0].action,
                success:function(data,textStatus,xhr){
                    if (data.success) {
                        window.location.href = data.redirect;
                        return;
                    }

                    var newusername = $('#newusername');
                    newusername.removeClass('field');
                    newusername.addClass('error');
                },
                error:function(xhr,textStatus,error){
                    $('#doRegister').attr('disabled',true);
                }
            });
        });
        $('#doAnonymous').click(function(evt) {
            var frm = $('#anonymousForm')[0];
            jQuery.ajax({
                context:frm,
                data: {
                    newusername:'anonymous',
                    newpassword1:'anonymous',
                    email:''
                },
                dataType:'json',
                type:'POST',
                url:frm.action,
                success:function(data,textStatus,xhr){
                    if (data.success) {
                        window.location.href = data.redirect;
                        return;
                    }
                },
                error:function(xhr,textStatus,error){
                    $('#doAnonymous').attr('disabled',true);
                }
            });
        });
    });
    </script>
  </body>
</html>
